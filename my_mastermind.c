/*

|                           ░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░                  ░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░    ▒▒░░░░  ░░▒▒▒▒    ░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░  ▒▒░░░░▒▒▒▒▒▒░░░░▒▒  ░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒    ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░  ░░▒▒░░░░░░░░░░░░░░▒▒░░  ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░  ▒▒░░▒▒░░▒▒▒▒▒▒░░░░░░▒▒  ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░  ▒▒░░▒▒▒▒░░▒▒▒▒▒▒▒▒░░▒▒  ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░                          ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░      ██████  ██████      ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░    ██████      ██████    ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░    ██████      ██████    ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░            ██            ░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░    ▒▒  ██  ██  ░░    ░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░          ░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░  ░░░░░░░░░░░░░░  ░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░  ░░  ░░  ░░  ░░  ░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░                      ░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░                  ░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░          ░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
|                           ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
|                           ▓▓▒▒▒▒░░▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░▓▓▓▓▓▓
|    
|    
|    ███╗   ███╗██╗   ██╗    ███╗   ███╗ █████╗ ███████╗████████╗███████╗██████╗ ███╗   ███╗██╗███╗   ██╗██████╗ 
|    ████╗ ████║╚██╗ ██╔╝    ████╗ ████║██╔══██╗██╔════╝╚══██╔══╝██╔════╝██╔══██╗████╗ ████║██║████╗  ██║██╔══██╗
|    ██╔████╔██║ ╚████╔╝     ██╔████╔██║███████║███████╗   ██║   █████╗  ██████╔╝██╔████╔██║██║██╔██╗ ██║██║  ██║
|    ██║╚██╔╝██║  ╚██╔╝      ██║╚██╔╝██║██╔══██║╚════██║   ██║   ██╔══╝  ██╔══██╗██║╚██╔╝██║██║██║╚██╗██║██║  ██║
|    ██║ ╚═╝ ██║   ██║       ██║ ╚═╝ ██║██║  ██║███████║   ██║   ███████╗██║  ██║██║ ╚═╝ ██║██║██║ ╚████║██████╔╝
|    ╚═╝     ╚═╝   ╚═╝       ╚═╝     ╚═╝╚═╝  ╚═╝╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝╚═╝     ╚═╝╚═╝╚═╝  ╚═══╝╚═════╝ 
                                                                                                            
source : https://textart.sh/topic/brain
         https://patorjk.com/software/taag/#p=testall&f=Graffiti&t=My%20mastermind
*/

#include "include/header.h"
#include "include/functions.h"
#include <stddef.h>
#include <stdio.h>




char* get_user_input(char * user_input_buffer){
        
    

    return user_input_buffer;
} 


void my_bzero(void *s, size_t n){
    char *c = s;
    size_t i;
    for (i = 0; i < n; ++i){
        c[i] = '\0';
    }
}

int main(int argc, char** argv){

    int nb_try = 0, i = 0, try = 10 ;
    int random_array[4] = {0};
    srand(clock()); // randomize seed
    randomizer(random_array); // randomize secret string obtained from seed
    intro();  

// flag parsing is not included inside a function. would make code unnecessarly difficult and hinder value update because of multiple returned value and I dont see the need for a struct.
// works to treat n amount of flags in whatever order, was built for my_cat/my_ngram.
    for(int y = 2; y < argc; y++){
        i++;
        if(argv[i][0] == '-'){
            for(int x = 1; argv[i][x] != '\0'; x++ ){
                char flag = argv[i][x];
                switch(flag){
                case 't':
                    try = my_ctoi(argv[y],my_strlen(argv[y]));
                break;
                case 'c': 
                    for (int z = 0;z< SIZE; z++){
                        random_array[z] = (int)argv[y][z]-48; 
                        }
                break;
                }
            }            
        }
    }

    while(nb_try < try){

        nb_try = round_update(nb_try);


        int isnotint_result = 0;
        char user_input_buffer[SIZE*10] = {0};
        char escape_catcher[10] = {0};


        while(isnotint_result < 1){
            
            read(0,user_input_buffer,40);
            //tcflush(*user_input_buffer, TCIFLUSH);
            if(isnotint(user_input_buffer) == 0){
                            
                write(1,"wrong input !\n>",15);
                //write(1,">",1);
                
            }
            isnotint_result = isnotint(user_input_buffer);
        }
        int count_return = check_input(user_input_buffer, random_array);
        
        if(count_return == SIZE){ 
            victory();
            return EXIT_SUCCESS;
            }

        write(1,"---\n",4);
        nb_try++;

        //my_bzero(user_input_buffer, my_strlen(user_input_buffer));

        //read(0,escape_catcher,10);
        fflush(stdin);
    }

    return EXIT_FAILURE;
}




